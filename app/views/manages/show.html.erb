<div class="row section">
  <div class="col-md-8 col-md-offset-2 section">
    <h2 class="text-center">Project (<%= @project.name %>) </h2>
    <div class="row text-right">
    <% if can? :manage, @project %>
      <%= link_to 'Edit Project', edit_project_path(@project),
      class: "btn sqs-block-btn btn-black btn-md" %>
      <%= link_to 'Home', root_path, class: "btn sqs-block-btn btn-black btn-md" %>
    <% else %>
      <%= link_to 'Home', root_path, class: "btn sqs-block-btn btn-black btn-md" %>
    <% end %>
    </div>
    <br>
    <script async defer type="text/javascript"
    	src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <%= javascript_include_tag "application" %>
    
    <% if @in_demand && @in_demand.count != 0 %>
      <p><strong>Project In-Demand Qualities </strong></p>
      <div class="col-lg-12">
        <ul>
        <% @in_demand.each do |quality|  %>
          <li>
            <%= quality.name %>
          </li>
        <% end %>
      </div>
    <% end %>
    
    <div class="image">
      <% if @project.image_file_name != nil %>
        <%= image_tag @project.image.url(:medium) %> <br><br>
      <% end %>
    </div>
    
    <div class="col-lg-12">
      <p><strong>Project Description: </strong><%= @project.description %></p>
    </div>
    	
    <div class="col-lg-12">
      <% if @project.start_date && @project.start_date.to_date %>
        <p>This project will start on <%= @project.start_date.to_date %>.</p>
      <% else %>
        <p>Project start date to be announced </p>
      <% end %>
    </div>
    	
    <div class="col-md-12">
      <% if !@project.skills.blank? %>
        <strong>Key Skills: </strong>
        <%= @project.skills.pluck("name").join(", ") %>
      <%end%>
    </div>
    
    <div class="col-md-12">
      <% if !@project.certifications.blank? %>
        <strong>Key Certifications: </strong>
        <%= @project.certifications.pluck("name").join(", ") %>
      <%end%>
    </div>
    
    <div class="col-md-12">
      <% if !@project.construction_experiences.blank? %>
        <strong>Key Construction Experience: </strong>
        <%= @project.construction_experiences.pluck("name").join(", ") %>
      <%end%>
    </div>
    
    <div class="col-md-12">
      <% if !@project.design_experiences.blank? %>
        <strong>Key Design Experience: </strong>
        <%= @project.design_experiences.pluck("name").join(", ") %>
      <%end%>
    </div>
    	
    <div class="col-md-12">
        <strong>Location: </strong><%= @project.location %>
    </div>
    <div class="col-md-12">
      <% if @project.volunteers.count == 0 || @project.volunteers == "" %>
        <p> <strong> Project Capacity: </strong> <%= @project.volunteer_capacity %> </p>
      <% else %>
        <p> 
    	<strong>Project</strong> <%= @project.name %> has 
    	<strong><%= @project.volunteers.count %></strong> volunteers, needs 
    	<strong><%= @project.volunteer_capacity - @project.volunteers.count %></strong> 
    	more!
        </p>
      <% end %>
    </div>

    <div class="col-md-12">
      <p></p>
    </div>

    <div class="col-md-12">
      <% if @project_availability_hash && @project_availability_hash.length > 0%>
        <strong>Volunteer Availability: </strong>
        <br><br>
        <%= column_chart @project_availability_hash %>
      <% end %>
    </div>

    <div class="col-md-12">
      <%if @project.managers.count == 0 || @project.managers == "" %>
        <p><strong>Project Manager: ---- </strong></p>
        <p><strong>Manager Contact Information: ---- </strong></p>
      <% else %>
        <table id="managers">
          <thead>
            <tr>
              <th class="table-color">Project Manager</th>
              <th class="table-color">Email</th>
              <th class="table-color">Phone</th>
            </tr>
          </thead>
          <tbody>
            <% @project.managers.each do |pm| %>
              <tr>
                <td><%= pm.name %></td>
                <td><%= pm.email %></td>
                <td><%= pm.phone %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% end %>
    </div>
    
    <div class="col-md-12">
      <%if @project.volunteers.count != 0 %>
        <table id="volunteers">
          <thead>
            <tr>
              <th class="table-color">Volunteer</th>
              <th class="table-color">Role</th>
              <th class="table-color">Email</th>
    	      <th class="table-color">Phone</th>
            </tr>
          </thead>
          <tbody>
            <% @project.volunteers.each do |vol| %>
              <tr>
                <td> <a href= "<%= user_path(vol.id) %>"> <%= vol.name %> </a></td>
		<%if !vol.role.blank? %>
		  <td><%= vol.role.name %></td>
		<% else %>
		  <td></td>
		<% end %>
                <td><%= vol.email %></td>
                <td><%= vol.phone %></td>
              </tr>
            <% end %>
          </tbody>
        </table>
      <% else %>
        <strong> No volunteers have been added to this project! </strong>
      <% end %>
    </div>
  
    <p style="page-break-before: always"></p>
    <br>
    <br>
  </div>
</div>
